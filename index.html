<!doctype html>
<html
  lang="en-us"
  data-bs-core="modern"
  data-bs-theme="dark"
  data-theme="default"
>

  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <meta
      http-equiv="X-UA-Compatible"
      content="ie=edge"
    />
    <title>Sci-Fi Theme Switcher</title>
    <link
      rel="manifest"
      href="manifest.json"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;700&amp;display=swap"
    />
    <!-- Normalize CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
      integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- Halfmoon CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/halfmoon@2.0.1/css/halfmoon.min.css"
      rel="stylesheet"
      integrity="sha256-SsJizWSIG9JT9Qxbiy8xnYJfjCAkhEQ0hihxRn7jt2M="
      crossorigin="anonymous"
    >
    <!-- Halfmoon modern core theme -->
    <link
      href="https://cdn.jsdelivr.net/npm/halfmoon@2.0.1/css/cores/halfmoon.modern.css"
      rel="stylesheet"
      integrity="sha256-DD6elX+jPmbFYPsGvzodUv2+9FHkxHlVtQi0/RJVULs="
      crossorigin="anonymous"
    >
    <link
      id="topcoat-stylesheet"
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/topcoat/0.8.0/css/topcoat-desktop-dark.min.css"
    />

    <link
      rel="stylesheet"
      type="text/css"
      href="./src/css/theme-switcher.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="./src/css/custom/media-queries.css"
    />
    <style>
      body {
        font-family: var(--source-sans-pro), sans-serif;
      }
    </style>
  </head>

  <body class="container-fluid bg-body bg-gradient w-100 h-100 subpixel-antialiased text-body p-0">
    <div
      id="header"
      class="container ms-auto fixed-top bg-primary bg-gradient rounded-pill rounded-top-0 rounded-end-0 align-self-end w-75 text-end m-0 text-end justify-content-end shadow border-bottom border-end-0 border-top-0 p-1 pe-0 pt-0 pb-0 w-75"
    >
      <header class="card bg-transparent w-100 text-end rounded-pill rounded-top-0 rounded-end-0 p-1 pt-0 ps-0 pe-0">
        <nav
          class=" nav nav-justified navbar topcoat-navigation-bar bg-body rounded-pill rounded-top-0 rounded-end-0 m-0 p-0"
        >
          <h1 class="align-bottom display-1 topcoat-navigation-bar__title m-0 ms-5 p-0">Theme Switcher
          </h1>
        </nav>
      </header>
    </div>
    <div
      id="content"
      class="text-center w-lg-75 m-auto mt-5 pt-5"
    >
      <article class="card bg-transparent border-5 rounded-5 p-1 mx-1 my-5 shadow">
        <header class="card-header rounded-top-5 rounded-bottom-0 p-0">
          <h2 class="text-center card-title display-6 p-3">
            Welcome to the Sci-Fi Theme Switcher!
          </h2>
        </header>
        <section class="card-body bg-body-secondary rounded-bottom-5">
          <header>
            <h2 class="text-center">About</h2>
          </header>
          <section
            id="info"
            class="container-fluid text-center rounded-bottom-5 w-100 my-5"
          >
            <details class="align-middle p-3">
              <summary>
                <h3 class="d-inline bg-body-tertiary">What is it?</h3>
              </summary>
              <span class="p-5 w-100 d-block text-start">
                <p class="">
                  This is a simple web development project that uses CSS custom properties (variables) to change the
                  theme
                  of the page. The theme is changed by clicking on one of the switches below. There are three
                  sections:
                </p>
                <ul>
                  <li>
                    light themes
                  </li>
                  <li>
                    default theme
                  </li>
                  <li>
                    dark themes
                  </li>
                </ul>
              </span>
            </details>
            <details class="align-middle p-3">
              <summary class="">
                <h3 class="d-inline">How?</h3>
              </summary>
              <p class="p-3">
                Select a theme from the choices below
                to demonstrate the project.
              </p>
            </details>
          </section>
        </section>

      </article>
      <article class="text-center w-100 mt-5 bg-transparent my-5">
        <main class="card bg-body bg-opacity-10 border rounded-5 p-1 mx-1 my-5 shadow">
          <section
            id="switcher"
            class="container-fluid text-center"
          >
            <form class="container-fluid">
              <legend class="">
                <header>
                  <h1 class="text-center">Theme Switcher</h1>
                </header>
              </legend>
              <fieldset
                id="default-switch"
                form="theme-select"
                class="card bg-body-secondary d-inline-block text-end"
              >
                <legend class="card-header">
                  <header>
                    <h2 class="card-title text-center">Current theme</h2>
                  </header>
                </legend>
                <p
                  id="theme-name"
                  class="text-center"
                >Default</p>
                <span class="d-inline-block bg-opacity-10 p-5 w-100 rounded">
                  Reset to default&nbsp;
                  <label
                    for="reset"
                    class="topcoat-switch text-start"
                  >
                    <input
                      name="theme"
                      type="radio"
                      id="reset"
                      class="topcoat-switch__input"
                      data-bs-toggle="tooltip"
                      data-bs-title="Reset to default theme"
                      value="default"
                      checked
                    />
                    <div class="topcoat-switch__toggle"></div>
                  </label>
                </span>
              </fieldset>
              <fieldset
                id="light-themes"
                form="theme-select"
                class="card bg-body-secondary d-inline-block text-end"
              >
                <legend class="">
                  <header>
                    <h3 class="text-center">Light</h3>
                  </header>
                </legend>
                <section class="d-inline-block bg-opacity-10 p-5 w-100 rounded">
                  <h4 class="d-inline justify-content-center">
                    Alien
                  </h4>
                  <label
                    for="theme0"
                    class="topcoat-switch text-start"
                  >
                    <input
                      name="theme"
                      id="theme0"
                      type="radio"
                      class="topcoat-switch__input"
                      value="0"
                    />
                    <div class="topcoat-switch__toggle"></div>
                  </label>
                  <br />
                  <h4 class="d-inline justify-content-center">
                    Back To The Future</h4>
                  <label
                    for="theme-1"
                    class="topcoat-switch text-start m-3"
                  >
                    <input
                      id="theme-1"
                      name="theme"
                      type="radio"
                      class="topcoat-switch__input"
                      value="1"
                    />
                    <div class="topcoat-switch__toggle"></div>
                  </label>
                  <br />
                  <h4 class="d-inline justify-content-center">
                    Star Wars: Tatooine</h4>
                  <label
                    for="theme-2"
                    class="topcoat-switch text-start m-3"
                  >
                    <input
                      id="theme-2"
                      name="theme"
                      type="radio"
                      class="topcoat-switch__input"
                      value="2"
                    />
                    <div class="topcoat-switch__toggle"></div>
                  </label>
                  <br />
                  <h4 class="d-inline justify-content-center">
                    The 5th Element</h4>
                  <label
                    for="theme-3"
                    class="topcoat-switch text-start m-3"
                  >
                    <input
                      id="theme-3"
                      name="theme"
                      type="radio"
                      class="topcoat-switch__input"
                      value="3"
                    />
                    <div class="topcoat-switch__toggle"></div>
                  </label>
                  <br />
                  <h4 class="d-inline justify-content-center">
                    Close Encounters</h4>
                  <label
                    for="theme-4"
                    class="topcoat-switch text-start m-3"
                  >
                    <input
                      id="theme-4"
                      name="theme"
                      type="radio"
                      class="topcoat-switch__input"
                      value="4"
                    />
                    <div class="topcoat-switch__toggle"></div>
                  </label>
                  <br />
                </section>
              </fieldset>
              <fieldset
                id="dark-themes"
                form="theme-select"
                class="card bg-body-secondary d-inline-block text-end"
              >
                <legend>
                  <h2 class="text-center">Dark</h2>
                </legend>
                <span class="d-inline-block bg-opacity-10 p-5 w-100 rounded">
                  Blade&nbsp;Runner
                  <label
                    for="theme-5"
                    class="topcoat-switch text-start my-3"
                  >
                    <input
                      id="theme-5"
                      name="theme"
                      type="radio"
                      class="topcoat-switch__input"
                      value="5"
                    />
                    <div class="topcoat-switch__toggle"></div>
                  </label>
                  <br />
                  Jurassic&nbsp;Park
                  <label
                    for="theme-6"
                    class="topcoat-switch text-start my-3"
                  >
                    <input
                      id="theme-6"
                      name="theme"
                      type="radio"
                      class="topcoat-switch__input"
                      value="6"
                    />
                    <div class="topcoat-switch__toggle"></div>
                  </label>
                  <br />
                  Star&nbsp;Wars: Death&nbsp;Star
                  <label
                    for="theme-7"
                    class="topcoat-switch text-start my-3"
                  >
                    <input
                      id="theme-7"
                      name="theme"
                      type="radio"
                      class="topcoat-switch__input"
                      value="7"
                    />
                    <div class="topcoat-switch__toggle"></div>
                  </label>
                  <br />
                  The&nbsp;Matrix
                  <label
                    for="theme-8"
                    class="topcoat-switch text-start my-3"
                  >
                    <input
                      id="theme-8"
                      name="theme"
                      type="radio"
                      class="topcoat-switch__input"
                      value="8"
                    />
                    <div class="topcoat-switch__toggle"></div>
                  </label>
                  <br />
                  Dune
                  <label
                    for="theme-9"
                    class="topcoat-switch text-start my-3"
                  >
                    <input
                      id="theme-9"
                      name="theme"
                      type="radio"
                      class="topcoat-switch__input"
                      value="9"
                    />
                    <div class="topcoat-switch__toggle"></div>
                  </label>
                  <br />
                </span>
              </fieldset>

            </form>
          </section>
          <footer>
            <span class="">&nbsp;</span>
          </footer>
        </main>
      </article>
    </div>

    <div
      id="page-footer"
      class="container-fluid sticky-bottom bg-primary rounded-top-pill rounded-start-0 p-1 ps-0 pb-0 w-75 float-start shadow"
    >
      <footer class="text-center bg-body bg-gradient rounded-top-pill rounded-start-0">
        <small
          id=""
          class="line-height-0"
        >

          <span id="made-with">Made With</span>
          By PhobiaCide
        </small>

      </footer>
    </div>

    <div id="scripts">
      <script>
        // Constants and Destructuring
        const { body, documentElement, getElementsByName } = document;
        const widthBreakpoint = 768;

        // Local Storage Functions
        const saveSelectedTheme = (string) => localStorage.setItem("theme", string);
        const getSavedTheme = () => localStorage.getItem("theme");

        // Theme-related Functions
        const getThemeElements = () => document.getElementsByName("theme");
        const themeElements = getThemeElements();
        console.log(themeElements);
        const getSelectedTheme = () =>
        {
          let selectedTheme = null;
          for (let themeElement of themeElements) {
            if (themeElement.checked === true) {
              selectedTheme = themeElement.value;
              break;
            }
          }
          return selectedTheme;
        };

        const applyTheme = (theme) =>
        {
          if (!typeof +theme === "number") {
            if (!theme === "default") {
              console.error("Theme must be a number or 'default'.");
              return;
            }
          }
          const attribute = "data-theme";
          documentElement.setAttribute(attribute, theme); // Change activeMode to theme
          saveSelectedTheme(theme);
        };

        // Theme Mode Functions
        const getUserThemeMode = () => (+documentElement.getAttribute("data-theme") >= 5) ? "dark" : "light";

        // Initialization
        const applyMode = (mode) => document.documentElement.setAttribute("data-theme", mode);

        document.addEventListener("DOMContentLoaded", () =>
        {
          const savedTheme = getSavedTheme();
          const userPreferences = getUserThemeMode();

          applyMode(savedTheme || userPreferences);
          donTopcoat();

          // Event listener for theme selection
          themeElements.forEach((element) =>
          {
            element.addEventListener("click", () =>
            {
              applyTheme(getSelectedTheme());
              applyMode(getUserThemeMode());
            });
          });
        });

        // Topcoat Functions
        const isDesktop = () => window.innerWidth >= widthBreakpoint;
        const getScreenSize = () => (isDesktop() ? 'desktop' : 'mobile');

        const baseRef = 'https://cdnjs.cloudflare.com/ajax/libs/topcoat/0.8.0/css/topcoat-';

        const constructTopcoatHref = (themeMode) => `${baseRef}${getScreenSize()}-${themeMode}.min.css`;


        const donTopcoat = () =>
        {
          const activeMode = document.documentElement.getAttribute('data-bs-theme') || 'light';
          console.log(`Active mode: ${activeMode}`);

          const href = constructTopcoatHref(activeMode);
          console.log(`Topcoat href: ${href}`);

          const topcoat = document.getElementById('topcoat-stylesheet');
          console.log(`Topcoat element: ${topcoat}`);

          topcoat.setAttribute('href', href);
          applyMode(activeMode);
        };

        window.addEventListener('resize', donTopcoat);

        // Create a MutationObserver instance
        const observer = new MutationObserver(donTopcoat);

        // Configure and start the observer
        observer.observe(document.documentElement, { attributes: true, attributeFilter: ['data-bs-theme'] });
      </script>
      <!--
      <script src="./src/js/theme-switcher.js"></script>
      <script src="./src/js/topcoat-loader.js"></script>
      -->
      <script
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"
        integrity="sha512-X/YkDZyjTf4wyc2Vy16YGCPHwAY8rZJY+POgokZjQB2mhIRFJCckEGc6YyX9eNsPfn0PzThEuNs+uaomE5CO6A=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"
      ></script>
    </div>

  </body>

</html>